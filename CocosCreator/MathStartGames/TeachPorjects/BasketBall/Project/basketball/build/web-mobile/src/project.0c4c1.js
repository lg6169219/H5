window.__require=function t(e,i,n){function o(a,c){if(!i[a]){if(!e[a]){var r=a.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+a+"'")}}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){return o(e[a][1][t]||t)},h,h.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({Ball:[function(t,e,i){"use strict";cc._RF.push(e,"05d6195d99B06zz0IIi6csv","Ball");var n=cc.Enum({BEGEN:-1,ENDED:-1,CANCEL:-1}),o=cc.Enum({FLY:-1,DOWN:-1,NONE:-1});cc.Class({extends:cc.Component,properties:{emitSpeed:0,gravity:0,scale:0,showTime:0,maxXSpeed:0},init:function(t,e){this.game=t,this.valid=!1,this.status=n.CANCEL,this.currentHorSpeed=0,this.currentVerSpeed=0,this.target=cc.v2(0,0),this.node.setScale(1),this.node.rotation=0,this.hitIn=!1,this.status=n.ENDED,this.emitSpeed=980,this.maxXSpeed=500,this.gravity=1430,(e=Math.max(.3,e))>=.53&&e<=.7&&(e=.65),this.currentVerSpeed=this.emitSpeed,this.currentHorSpeed=554*e,this.game.soundMng.playFlySound()},doAnim:function(){var t=cc.scaleTo(1,this.scale),e=2*(Math.random()-.5),i=cc.rotateBy(2,1080*e),n=cc.spawn(t,i);this.node.runAction(n)},update:function(t){this.status==n.ENDED&&(this._updatePosition(t),this._checkValid())},_checkValid:function(){if(this.ballStatus===o.DOWN&&!this.valid){var e=this.node.parent;if(null!=e){var i=this.game.basket,n=i.left,s=i.right,a=this.node.getBoundingBoxToWorld().width/2,c=(e.convertToWorldSpaceAR(this.node.getPosition()).x,e.convertToWorldSpaceAR(this.node.getPosition()).x,e.convertToWorldSpaceAR(this.node.getPosition()).x),r=e.convertToWorldSpaceAR(this.node.getPosition()).y,l=e.convertToWorldSpaceAR(i.linePreNode.getPosition()).y-a,h=i.node.convertToWorldSpaceAR(n.getPosition()).x,u=i.node.convertToWorldSpaceAR(s.getPosition()).x,d=i.node.convertToWorldSpaceAR(n.getPosition()).y-2*a;if(r<l&&r>d&&c>h&&c<u){this.valid=!0,this.currentHorSpeed=0,this.game.score.addScore(),this.game.player.playWin();var p=t("./global_var/GlobalVar");p.lifeCount+=1,this.game.lifeCount.setCount(p.lifeCount),this.game.timeMng.addTime(5),this.game.basket.playNetAnim(),this.game.playBallInpfx(),this.game.soundMng.playBallInSound()}}}},bindShadow:function(t){this.shadow=t},_updatePosition:function(t){if(this.valid||(this.node.x+=t*this.currentHorSpeed),this.currentVerSpeed-=t*this.gravity,this.node.y+=t*this.currentVerSpeed,this._changeBallStatus(this.currentVerSpeed),this.ballStatus===o.NONE&&this._isOutScreen())return this.valid||(this.game.soundMng.playBallBotInSound(),this.game.player.enterIdleState()),this.node.stopAllActions(),this.node.removeFromParent(),this.valid=!1,void this.game.ballPool.put(this.node)},_isOutScreen:function(){return this.node.y<-500},_changeBallStatus:function(t){0===t||this._isOutScreen()?this.ballStatus=o.NONE:t>0?(this.ballStatus=o.FLY,this.game.basket.switchMaskLineShow(!1)):(this.ballStatus=o.DOWN,this.game.basket.switchMaskLineShow(!0))},onCollisionEnter:function(t,e){if(this.ballStatus!==o.FLY&&!this.valid){var i=t.node.getComponent("CollisionBox"),n=i.getLeft(),s=i.getRight(),a=e.world.radius,c=this.node.parent.convertToWorldSpaceAR(e.node.getPosition()),r=this.game.basket.node.convertToWorldSpaceAR(t.node.getPosition()),l=(c.y-r.y)/a,h=Math.abs(r.x-c.x)/a,u=this.currentHorSpeed/Math.abs(this.currentHorSpeed)*this.maxXSpeed;("right"===t.node.name&&this.node.x<=n||"left"===t.node.name&&this.node.x>=s)&&(this.hitIn?this.currentHorSpeed=u*h:(this.currentHorSpeed=-1*u*h,this.hitIn=!0)),("right"===t.node.name&&this.node.x>s||"left"===t.node.name&&this.node.x<n)&&(this.currentHorSpeed=u),this.currentVerSpeed=-1*this.currentVerSpeed*l}}}),cc._RF.pop()},{"./global_var/GlobalVar":"GlobalVar"}],Basket:[function(t,e,i){"use strict";cc._RF.push(e,"ac9fdFyp49GVKHUgk9/FVli","Basket"),cc.Class({extends:cc.Component,properties:{line:cc.Node,left:cc.Node,right:cc.Node,linePre:cc.Prefab,count:cc.Label},init:function(t){this.game=t,this._createMaskLine()},startMove:function(){},stopMove:function(){this.node.stopAllActions(),this._resetPosition()},_resetPosition:function(){this.node.setPosition(0)},_doMoveAnim:function(){var t=cc.moveBy(3,cc.v2(200,0)),e=cc.moveBy(3,cc.v2(-200,0)),i=cc.repeatForever(cc.sequence(t,e,e,t));this.node.runAction(i)},update:function(t){if(this.linePreNode){var e=this.node.convertToWorldSpaceAR(this.line.getPosition()),i=this.node.parent.convertToNodeSpaceAR(e);this.linePreNode.setPosition(cc.v2(this.node.x,i.y))}},_createMaskLine:function(){this.linePreNode=cc.instantiate(this.linePre),this.game.node.addChild(this.linePreNode)},switchMaskLineShow:function(t){this.linePreNode.zIndex=t?100:0},playNetAnim:function(){if(this.linePreNode){var t=cc.scaleTo(.1,1,1.1),e=cc.scaleTo(.3,1,.9),i=cc.scaleTo(.2,1,1),n=cc.sequence(t,e,i);this.linePreNode.getChildByName("net").runAction(n)}}}),cc._RF.pop()},{}],CollisionBox:[function(t,e,i){"use strict";cc._RF.push(e,"7c4c6Rwi4tIC4UMBgYL4231","CollisionBox"),cc.Class({extends:cc.Component,properties:{},getLeft:function(){return this.node.x-this.node.width/2},getRight:function(){return this.node.x+this.node.width/2},getWorldPoint:function(t){return t.convertToWorldSpaceAR(this.node.getPosition())}}),cc._RF.pop()},{}],EndGame:[function(t,e,i){"use strict";cc._RF.push(e,"d155bxcsaZJR74phvbYTKyu","EndGame"),cc.Class({extends:cc.Component,properties:{},start:function(){var e=t("./global_var/GlobalVar");this.node.getChildByName("contentLabel").getComponent(cc.RichText).string="<color=#000000>\u672c\u6b21\u6e38\u620f\u83b7\u5f97<color=#892c11>"+e.finalScore+"</color>\u5206</color>";var i=this.node.getChildByName("scoreLabel");i.getComponent(cc.RichText).string="<p align = 'left'><color=#000000>\u606d\u559c\u83b7\u5f97<color=#892c11>"+Math.floor(e.finalScore/5)+"</color>\u4e2a</color></p>",this.node.getChildByName("damuge1").x=i.x+i.width+40}}),cc._RF.pop()},{"./global_var/GlobalVar":"GlobalVar"}],GameLoader:[function(t,e,i){"use strict";cc._RF.push(e,"5e8d98Sz15MnI2wBSFwtgZ9","GameLoader");var n=new Object;n.sIsLoaded=!1,n.isLoaded=function(){return this.sIsLoaded},n.load=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{success:function(){},fail:function(){},onProgress:function(t,e,i){}};(new Date).getTime();cc.loader.loadResDir("/",function(e,i,n){t.onProgress&&t.onProgress(e/i,e,i)},function(e,i,o){null==e?(n.sIsLoaded=!0,t.success()):t.fail&&t.fail()})},e.exports=n,cc._RF.pop()},{}],GameManager:[function(t,e,i){"use strict";cc._RF.push(e,"7b066H36KxCVr0SNDZka91/","GameManager");var n=t("Basket"),o=(t("Ball"),t("Score")),s=t("LifeCount"),a=t("player"),c=t("SoundManager"),r=t("TimeManager");cc.Class({extends:cc.Component,properties:{ball:cc.Prefab,basket:n,startPosition:cc.Vec2,score:o,lifeCount:s,soundMng:c,timeMng:r,player:a,startNode:{type:cc.Node,default:null},ballInPfx:{type:cc.Node,default:null},tishiNode:{type:cc.Node,default:null}},onLoad:function(){this.startNode.active=!0},sendRequest:function(){console.log("==========\u5185\u90e8request");this.sendMessage({status:0,type:"call"})},sendMessage:function(t){parent.iframeEvent(t)},start:function(){window.iframeEvent=function(e){(console.log("\u5185\u90e8\u754c\u9762\u63a5\u6536\u7684\u6d88\u606fBB"),console.log(e),e.goodsSum)&&(t("./global_var/GlobalVar").lifeCount=e.goodsSum)},this.sendRequest(),this.soundMng.playBgSound()},onGameStart:function(){this.startNode.active=!1,this.ballPool=new cc.NodePool("Ball"),this.initPlayer(),this.initCollisionSys(),this.basket.init(this),this.score.init(this),this.timeMng.init(this),this.timeMng.oneSchedule(),this.score.setScore(0);var e=t("./global_var/GlobalVar");this.lifeCount.setCount(e.lifeCount)},initCollisionSys:function(){this.collisionManager=cc.director.getCollisionManager(),this.collisionManager.enabled=!0},initPlayer:function(){this.player.init(this)},shootBall:function(e){this.tishiNode.active=!1;var i=t("./global_var/GlobalVar");i.lifeCount<=0||(i.lifeCount=i.lifeCount-1,i.lifeCount=Math.max(0,i.lifeCount),this.lifeCount.setCount(i.lifeCount),0===i.lifeCount&&this.scheduleOnce(this.gameOver,1.5),this.newBall(e))},playBallInpfx:function(){this.ballInPfx.getComponent("frame_anima").play_once()},newBall:function(t){var e=null;(e=this.ballPool.size()>0?this.ballPool.get(this):cc.instantiate(this.ball)).zIndex=1,this.node.addChild(e),e.setPosition(this.startPosition),e.getComponent("Ball").init(this,t)},newPlayer:function(){},startMoveBasket:function(){this.basket.startMove()},stopMoveBasket:function(){this.basket.stopMove()},sendEndRequest:function(){this.sendMessage({status:2})},gameOver:function(){if(!this.isGameOver){this.soundMng.stopBgSound(),this.soundMng.playEndSound(),this.isGameOver=!0;var e=this.score.getScore();t("./global_var/GlobalVar").finalScore=e,cc.director.loadScene("OverScene"),this.scheduleOnce(this.sendEndRequest,2)}}}),cc._RF.pop()},{"./global_var/GlobalVar":"GlobalVar",Ball:"Ball",Basket:"Basket",LifeCount:"LifeCount",Score:"Score",SoundManager:"SoundManager",TimeManager:"TimeManager",player:"player"}],GlobalVar:[function(t,e,i){"use strict";cc._RF.push(e,"1efb97V9k5Lt4LnOgGt/0Bm","GlobalVar");e.exports={lifeCount:10,finalScore:0},cc._RF.pop()},{}],LifeCount:[function(t,e,i){"use strict";cc._RF.push(e,"2780bDR/69IFayo2NkmacME","LifeCount"),cc.Class({extends:cc.Component,properties:{scoreText:cc.Label},init:function(t){this.game=t,this._count=0},getCount:function(){return _count},setCount:function(t){this._count=t,this._updateCount()},subCount:function(){this._count-=1,this._count=Math.max(0,this._count),this._updateCount()},_updateCount:function(){this.scoreText.string=this._count}}),cc._RF.pop()},{}],Line:[function(t,e,i){"use strict";cc._RF.push(e,"00dcby5FcZIh5P10wPcfVGt","Line"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],LoadingPageControl:[function(t,e,i){"use strict";cc._RF.push(e,"87592P6EbNCFr1z1nIuAFme","LoadingPageControl"),cc.Class({extends:cc.Component,properties:{progressBar:{default:null,type:cc.ProgressBar},loadingTipsLabel:{default:null,type:cc.Label}},onLoad:function(){},start:function(){var e=this,i=t("GameLoader");this.progressBar.totalLength=this.progressBar.node.width,this.progressBar.progress=0,i.isLoaded()||i.load({success:function(){e.initGameConfig()},fail:function(){e.loadingTipsLabel.string="\u5594\u5662\uff0c\u6e38\u620f\u52a0\u8f7d\u5931\u8d25\u4e86"},onProgress:function(t){e.progressBar.progress=t,e.loadingTipsLabel.string="\u6b63\u5728\u52aa\u529b\u52a0\u8f7d\u4e2d "+Math.floor(100*t)+"%"}})},initGameConfig:function(){cc.director.loadScene("Game")}}),cc._RF.pop()},{GameLoader:"GameLoader"}],Score:[function(t,e,i){"use strict";cc._RF.push(e,"0dbad8nuMBK8L4YWla50RjT","Score"),cc.Class({extends:cc.Component,properties:{scoreText:cc.Label},init:function(t){this.game=t,this._score=0},getScore:function(){return this._score},setScore:function(t){this._score=t,this._updateScore()},addScore:function(){this._score+=1,this._updateScore()},_updateScore:function(){this.node.getComponent(cc.Label).string="Score:"+this._score}}),cc._RF.pop()},{}],Shadow:[function(t,e,i){"use strict";cc._RF.push(e,"403b5GGRt5LYYNN87LqlnM7","Shadow"),cc.Class({extends:cc.Component,properties:{showTime:0,shadow2:cc.Node},init:function(t){this.node.setScale(1),this._showAnim()},_showAnim:function(){this.node.opacity=0,this.shadow2.active=!0;var t=cc.fadeIn(this.showTime);this.node.runAction(t)},dimiss:function(){this._dismissAnim()},_dismissAnim:function(){this.shadow2.active=!1;var t=cc.fadeOut(this.showTime),e=cc.scaleTo(this.showTime,.5),i=cc.spawn(t,e),n=cc.callFunc(this._callBack.bind(this));this.node.runAction(cc.sequence(i,n))},_callBack:function(){}}),cc._RF.pop()},{}],SoundManager:[function(t,e,i){"use strict";cc._RF.push(e,"3495eBx+i1PlrOKcbTaqUD6","SoundManager"),cc.Class({extends:cc.Component,properties:{toggleAudio:!0,scoreAudio:{default:null,type:cc.AudioClip},ballInAudio:{default:null,type:cc.AudioClip},ballNotInAudio:{default:null,type:cc.AudioClip},flyAudio:{default:null,type:cc.AudioClip},endAudio:{default:null,type:cc.AudioClip},bgSound:{default:null,type:cc.AudioClip}},onLoad:function(){cc.audioEngine.setEffectsVolume(.5)},playScoreSound:function(){this.playSound(this.scoreAudio)},playBallInSound:function(){this.playSound(this.ballInAudio)},playBallBotInSound:function(){this.playSound(this.ballNotInAudio)},playFlySound:function(){this.playSound(this.flyAudio)},playEndSound:function(){this.playSound(this.endAudio)},playSound:function(t){this.toggleAudio&&cc.audioEngine.playEffect(t,!1)},playBgSound:function(){cc.audioEngine.setMusicVolume(.3),cc.audioEngine.playMusic(this.bgSound,!0)},stopBgSound:function(){cc.audioEngine.stopMusic()}}),cc._RF.pop()},{}],TimeManager:[function(t,e,i){"use strict";cc._RF.push(e,"f81cdY3hlNAza/JwLtsWk2O","TimeManager"),cc.Class({extends:cc.Component,properties:{maxTime:0,timeToMove:0},init:function(t){this.game=t,this.time=this.maxTime,this.isTimeToMove=!1},_callback:function(){this.counting&&(this.counting=!1,this.game.basket.count.string="00  00",this.game.gameOver())},addTime:function(t){this.time+=t},stopCounting:function(){this.time=this.maxTime},oneSchedule:function(){this.stopCounting(),this.counting=!0},update:function(t){if(this.counting&&this.time>0){this.time-=t,this.maxTime-this.timeToMove>=this.time&&!this.isTimeToMove&&(this.isTimeToMove=!0,this.game.startMoveBasket());var e=this.time.toFixed(2);4===e.length&&(e="0"+e),this.game.basket.count.string=e.replace(".","  "),this.time<=0&&this._callback()}}}),cc._RF.pop()},{}],frame_anima_test:[function(t,e,i){"use strict";cc._RF.push(e,"e4f276JfJVLWI1SkFBE0tfF","frame_anima_test");var n=t("frame_anima");cc.Class({extends:cc.Component,properties:{animaHit:{type:n,default:null}},start:function(){this.animaHit.duration=.1,this.animaHit.play_loop()}}),cc._RF.pop()},{frame_anima:"frame_anima"}],frame_anima:[function(t,e,i){"use strict";cc._RF.push(e,"ae9ceO5+RVE54Bbf2+IuCYV","frame_anima"),cc.Class({extends:cc.Component,properties:{sprite_frames:{default:[],type:cc.SpriteFrame},duration:.1,loop:!1,play_onload:!1},onLoad:function(){this.end_func=null,this.is_playing=!1,this.play_time=0,this.sprite=this.getComponent(cc.Sprite),this.sprite||(this.sprite=this.addComponent(cc.Sprite)),this.play_onload&&(this.loop?this.play_loop():this.play_once(null))},start:function(){},play_loop:function(){this.sprite_frames.length<=0||(this.loop=!0,this.end_func=null,this.is_playing=!0)},resetAnima:function(){this.sprite.spriteFrame=this.sprite_frames[0],this.is_playing=!1},play_once:function(t){this.sprite_frames.length<=0||(this.play_time=0,this.end_func=t,this.loop=!1,this.is_playing=!0)},update:function(t){if(this.is_playing){this.play_time+=t;var e=Math.floor(this.play_time/this.duration);if(this.loop){for(;e>=this.sprite_frames.length;)e-=this.sprite_frames.length,this.play_time-=this.sprite_frames.length*this.duration;this.sprite.spriteFrame=this.sprite_frames[e]}else e>=this.sprite_frames.length?(this.is_playing=!1,this.end_func&&this.end_func()):this.sprite.spriteFrame=this.sprite_frames[e]}}}),cc._RF.pop()},{}],player:[function(t,e,i){"use strict";cc._RF.push(e,"fecc0yN9xlDArdWwWTKzUI0","player"),cc.Class({extends:cc.Component,properties:{touchSlider:{type:cc.Slider,default:null}},onLoad:function(){this.beginTouch=!1,this.power=0,this.maxPower=2},init:function(t){this.game=t;var e=this.node.getChildByName("shoot").getComponent("frame_anima");this.node.on(cc.Node.EventType.TOUCH_START,function(){var t=this.node.getChildByName("idle");!e.is_playing&&t.active&&(this.beginTouch=!0,this.power=0)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(){this.shoot()},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){this.shoot()},this),this.enterIdleState()},start:function(){},shoot:function(){if(this.beginTouch){this.beginTouch=!1,this.quitIdleState();var t=this.node.getChildByName("shoot").getComponent("frame_anima");t.is_playing||(t.play_once(function(){}.bind(this)),this.scheduleOnce(function(){this.game.shootBall(parseFloat(this.touchSlider.progress))}.bind(this),4*t.duration+.1))}},enterIdleState:function(){this.node.getChildByName("idle").active=!0,this.node.getChildByName("shoot").active=!1,this.node.getChildByName("win").active=!1,this.playIdle(),this.schedule(this.playIdle,.7)},quitIdleState:function(){this.node.getChildByName("idle").active=!1,this.node.getChildByName("shoot").active=!0,this.node.getChildByName("win").active=!1,this.unschedule(this.playIdle)},playIdle:function(){this.node.getChildByName("idle").getComponent("frame_anima").play_once()},playWin:function(){this.quitIdleState(),this.node.getChildByName("shoot").active=!1;var t=this.node.getChildByName("win");t.active=!0,t.getComponent("frame_anima").play_once(function(){this.enterIdleState()}.bind(this))},update:function(t){if(this.beginTouch){this.power+=4*t,this.power>this.maxPower&&(this.power=0),this.power=Math.min(this.power,this.maxPower);var e=this.power/this.maxPower;this.touchSlider.progress=e}},resetBar:function(){this.touchSlider.progress=0}}),cc._RF.pop()},{}]},{},["Ball","Basket","CollisionBox","EndGame","GameManager","LifeCount","Line","Score","Shadow","SoundManager","TimeManager","frame_anima","frame_anima_test","GlobalVar","GameLoader","LoadingPageControl","player"]);